## Setup python3 virtual env and run regtools_bed_by_celltype.py on MARS
## Workdir: /mnt/data/project0061/frances

#Request interactive node on MARS
srun -A none -J "Interactive-Job" --pty bash

#Load python3 module
module load apps/python3

#Create virtual env
python3 -m venv venv

#Activate virtual env
source venv/bin/activate

#Install pysam
pip install pysam

#Install jupyter
pip install jupyter

#Install pyranges
pip install pyranges

#Install gffutils
pip install gffutils

#Install matplotlib
pip install matplotlib

##To run Python script on MARS
#Convert jupyter notebook to python script
jupyter nbconvert --to python regtools_bed_by_celltype.ipynb #This produces regtools_bed_by_celltype.py (also in scripts folder)

#Run the script
python3 regtools_bed_by_celltype.py

#Convert jupyter notebook to python script
jupyter nbconvert --to python rescale_by_gene.ipynb #This produces rescale_by_gene.py (also in scripts folder)

#Run the script
python3 rescale_by_gene.py